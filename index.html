<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>AQA Data Integration Pipeline ‚Äî Interactive Workflow</title>

<!-- Cargar Mermaid.js directamente -->
<script type="module">
  import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
  mermaid.initialize({ startOnLoad: true, theme: "default" });
</script>

<style>
  body {
    font-family: 'Segoe UI', Roboto, Arial, sans-serif;
    background: #ffffff;
    color: #111827;
    margin: 0;
    padding: 0;
    text-align: center;
  }
  header {
    background: #f8fafc;
    border-bottom: 1px solid #e2e8f0;
    padding: 1.5rem;
  }
  h1 {
    margin: 0;
    font-size: 1.8rem;
  }
  p {
    margin-top: .4rem;
    color: #64748b;
  }
  .mermaid {
    text-align: center;
    margin: 2rem auto;
    max-width: 95%;
  }
  footer {
    padding: 1rem;
    font-size: 0.85rem;
    color: #64748b;
    background: #f9fafb;
    border-top: 1px solid #e5e7eb;
  }
</style>
</head>

<body>
  <header>
    <h1>üåç AQA Data Integration Pipeline</h1>
    <p>Interactive Workflow ‚Äî ARPA + ERA5 Integration</p>
  </header>

  <!-- Diagrama Mermaid embebido -->
  <div class="mermaid">
flowchart TD
    A1[User Configuration<br/>(cfg: start_date, end_date, variables)] --> B1[Load ARPA Metadata]
    B1 --> B2[Download ARPA Measurements]
    B2 --> B3[Download ERA5 Variables]
    B3 --> B4[Merge ERA5 Files]
    B4 --> B5[Build Spatial Grid]
    B5 --> B6[Interpolate ERA5 on ARPA Grid]
    B6 --> B7[Compute Period Means]
    B7 --> B8[Merge ERA5 + ARPA]
    B8 --> C1[Integrated Dataset]
    C1 --> C2[Summary CSV + GeoDataFrame]
    C2 --> C3[Visualization or GEE upload]
  </div>

  <footer>
    ¬© 2025 Saudisis ‚Äî Interactive diagram rendered with Mermaid.js
  </footer>
</body>
</html>
